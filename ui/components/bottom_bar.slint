// ============================================================================
// BOTTOM BAR COMPONENT - FRAME TRAILS
// ============================================================================
// Status bar showing current processing status

import { MaterialPalette } from "../material/ui/styling/material_palette.slint";
import {
    MaterialTypography,
} from "../material/ui/styling/material_typography.slint";
import {
    MaterialStyleMetrics,
} from "../material/ui/styling/material_style_metrics.slint";
import { MaterialText } from "../material/ui/components/material_text.slint";
import { Icon } from "../material/ui/components/icon.slint";
import { Icons } from "../material/ui/icons/icons.slint";
import { VerticalDivider } from "../material/ui/components/divider.slint";
import { AppTheme } from "../app_theme.slint";

export component BottomBar {
    in property <string> status-text: "Ready";
    in property <int> folders-in-queue: 0;
    in property <bool> is-processing: false;
    in property <int> history-length: 5;
    in property <int> threads: 0;

    min-height: 32px;

    Rectangle {
        background: MaterialPalette.surface-container;

        // Top border
        Rectangle {
            height: 1px;
            background: MaterialPalette.outline-variant;
        }

        HorizontalLayout {
            width: 100%;
            padding-top: 6px;
            padding-bottom: 6px;
            padding-left: 12px;
            padding-right: 12px;
            spacing: 12px;

            // Status indicator
            Rectangle {
                width: 8px;
                height: 8px;
                border-radius: 4px;
                background: root.is-processing ? AppTheme.success : MaterialPalette.outline;
                y: (parent.height - self.height) / 2;
            }

            // Status text
            MaterialText {
                text: root.status-text;
                style: MaterialTypography.label-medium;
                color: MaterialPalette.on-surface;
                vertical-alignment: center;
                horizontal-stretch: 1;
                overflow: elide;
            }

            VerticalDivider { }

            // Queue count
            Rectangle {
                width: 100px;

                MaterialText {
                    text: root.folders-in-queue + " folder" + (root.folders-in-queue == 1 ? "" : "s");
                    style: MaterialTypography.label-small;
                    color: MaterialPalette.on-surface-variant;
                    vertical-alignment: center;
                    horizontal-alignment: center;
                }
            }

            VerticalDivider { }

            // History length
            Rectangle {
                width: 80px;

                MaterialText {
                    text: "history: " + root.history-length;
                    style: MaterialTypography.label-small;
                    color: MaterialPalette.tertiary;
                    vertical-alignment: center;
                }
            }

            VerticalDivider { }

            // Threads
            Rectangle {
                width: 70px;

                MaterialText {
                    text: root.threads == 0 ? "auto" : root.threads + " threads";
                    style: MaterialTypography.label-small;
                    color: MaterialPalette.on-surface-variant;
                    vertical-alignment: center;
                }
            }
        }
    }
}
