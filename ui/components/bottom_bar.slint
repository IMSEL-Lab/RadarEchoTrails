// ============================================================================
// BOTTOM BAR COMPONENT
// ============================================================================
// Status bar showing current processing status

import { MaterialPalette } from "../material/ui/styling/material_palette.slint";
import {
    MaterialTypography,
} from "../material/ui/styling/material_typography.slint";
import { MaterialText } from "../material/ui/components/material_text.slint";
import { AppTheme } from "../app_theme.slint";

export component BottomBar {
    in property <string> status-text: "Ready";
    in property <int> folders-in-queue: 0;
    in property <bool> is-processing: false;
    in property <int> history-length: 5;
    in property <int> threads: 0;

    height: 28px;

    Rectangle {
        background: MaterialPalette.surface-container;

        HorizontalLayout {
            padding-left: 12px;
            padding-right: 12px;
            alignment: start;
            spacing: 16px;

            // Status indicator
            HorizontalLayout {
                spacing: 6px;

                Rectangle {
                    width: 8px;
                    height: 8px;
                    border-radius: 4px;
                    background: root.is-processing ? AppTheme.success : MaterialPalette.outline;
                    y: (parent.height - self.height) / 2;
                }

                MaterialText {
                    text: root.status-text;
                    style: MaterialTypography.label-small;
                    color: MaterialPalette.on-surface;
                    vertical-alignment: center;
                    overflow: elide;
                }
            }

            Rectangle {
                horizontal-stretch: 1;
            }

            // Queue count
            MaterialText {
                text: root.folders-in-queue + " folder" + (root.folders-in-queue == 1 ? "" : "s");
                style: MaterialTypography.label-small;
                color: MaterialPalette.on-surface-variant;
                vertical-alignment: center;
            }

            // History length
            MaterialText {
                text: "history: " + root.history-length;
                style: MaterialTypography.label-small;
                color: MaterialPalette.tertiary;
                vertical-alignment: center;
            }

            // Threads
            MaterialText {
                text: root.threads == 0 ? "auto" : root.threads + " threads";
                style: MaterialTypography.label-small;
                color: MaterialPalette.on-surface-variant;
                vertical-alignment: center;
            }
        }
    }
}
